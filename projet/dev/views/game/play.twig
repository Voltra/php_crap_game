{# Author : Ludwig GUERIN #}
{% extends "modules/layout.twig" %}

{% block keywords %}{% endblock %}

{% block title %}Play{% endblock %}

{% if not error %}
    {% set error=[] %}
{% endif %}

{% block body %}
    <div id="welcome">
        <p>Welcome, {{ username }}</p>
    </div>

    <div id="actions">
        <form action="/game/reset" method="POST">
            <button type="submit" class="fa">Reset &#xf021;</button>
        </form>

        <form action="/auth/logout" method="GET">
            <button type="submit" class="fa">Logout &#xf08b;</button>
        </form>
    </div>

    <div id="game">
        <table id="boardTable">
            <thead></thead>
            <tbody>
                {% for idy, y in board %}
                    <tr>
                        {% for idx, x in y %}
                            {% if invalids[idy][idx] %}
                                {# &Cross; #}
                                <td><p class="empty">&#x25A0;</p></td>
                            {% else %}
                                {# &smashp; #}
                                <td>{% if board[idy][idx] %} <p class="pawn">&ofcir;</p> {% else %} <p class="empty">&target;</p> {% endif %}</td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <form id="playForm" action="/game/processAction" method="POST">
            <div>
                <label for="curx">Current X: </label>
                <input name="curx" id="curx" type="text" placeholder="[0-6]" {% if curx %}value="{{ curx }}"{% endif %}/>
                <p class="error">{% if error.curx %}{{ error.curx }}{% endif %}</p>

                <label for="cury">Current Y:</label>
                <input name="cury" id="cury" type="text" placeholder="[0-6]" {% if cury %}value="{{ cury }}"{% endif %}/>
                <p class="error">{% if error.cury %}{{ error.cury }}{% endif %}</p>
                <br/>
            </div>

            <label for="nextx">To X:</label>
            <input name="nextx" id="nextx" type="text" placeholder="[0-6]" {% if nextx %}value="{{ nextx }}"{% endif %}/>
            <p class="error">{% if error.nextx %}{{ error.nextx }}{% endif %}</p>

            <label for="nexty">To Y:</label>
            <input name="nexty" id="nexty" type="text" placeholder="[0-6]" {% if nexty %}value="{{ nexty }}"{% endif %}/>
            <p class="error">{% if error.nexty %}{{ error.nexty }}{% endif %}</p>

            <br/>

            <button type="submit">PLAY</button>
        </form>
    </div>
{% endblock %}